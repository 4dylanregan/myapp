{"version":3,"sources":["components/LangDropdown.js","components/SearchBar.js","App.js","reportWebVitals.js","index.js"],"names":["LangDropdown","options","data","useState","languages","setLanguages","useEffect","langArray","children","forEach","document","push","language","sort","a","b","name","map","value","code","createOption","id","SearchBar","props","onSubmit","e","preventDefault","autoComplete","type","onChange","setSearch","target","makeBook","author","hLang","cLang","title","url","forEachBook","func","json","Array","isArray","sections","entries","book","searchByLanguage","lang","answer","obj","undefined","toLowerCase","section","console","log","SubmitButton","fetch","result","ok","status","toString","statusText","onClick","this","click","Component","App","setData","loading","setLoading","searchTerm","setSearchTerm","searchResults","setSearchResults","resultsList","axios","get","fetchData","fuseOptions","findAllMatches","shouldSort","includeScore","threshold","keys","fuseResult","Fuse","search","concat","subsections","subsection","results","score","length","entry","href","item","term","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.69d1d220.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction LangDropdown({ data }){\r\n    const [ languages, setLanguages ] = useState([]);\r\n    let options = null;\r\n\r\n    useEffect( // run whenever data changes\r\n        () => {\r\n            let langArray = [];\r\n            data.children[0].children.forEach( (document) => {\r\n                langArray.push(document.language);\r\n            });\r\n            langArray.sort((a, b) => a.name > b.name)\r\n            setLanguages(langArray);\r\n        },\r\n        [data]\r\n    )\r\n\r\n    const createOption = (language) => {\r\n        return (<option key={language.code} value={language.code}>{language.name}</option>)\r\n    }\r\n\r\n    options = \r\n            languages &&\r\n            languages.map( (language) => {\r\n                return createOption(language)\r\n            });\r\n    // console.log(options);\r\n    return(\r\n        \r\n        <select name=\"languages\" id=\"languages\">\r\n            <option key=\"allLangs\" value=\"allLangs\">All Languages</option>\r\n            {options}\r\n        </select>\r\n    )\r\n}\r\n\r\nexport default LangDropdown;","import React from 'react';\r\n\r\nfunction SearchBar(props){\r\n    const handleChange = (e) => {\r\n        props.setSearch(e.target.value);\r\n    }\r\n\r\n    return(\r\n        <form\r\n            onSubmit={(e) => {\r\n                e.preventDefault();\r\n            }}\r\n            name=\"searchBar\"\r\n        >\r\n            <input autoComplete=\"off\" type=\"text\" name=\"searchTerm\" onChange={handleChange} />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SearchBar;","import React, { useState, useEffect, Component } from 'react';\r\nimport LangDropdown from './components/LangDropdown';\r\nimport SearchBar from './components/SearchBar';\r\nimport axios from 'axios';\r\nimport Fuse from 'fuse.js';\r\n\r\nfunction makeBook(author, hLang, cLang, title, url)\r\n{\r\n\t//returns a struct with basic book info (author, human language, computer language, book title, url)\r\n\treturn {'author': author,\r\n\t\t\t'hLang': hLang, //human language\r\n\t\t\t'cLang': cLang, //computer language\r\n\t\t\t'title': title,\r\n\t\t\t'url': url\r\n\t\t\t}\r\n}\r\n\r\nfunction forEachBook(func, json) //Runs func on each section, entry, and book in json, which is a list of entries\r\n{\r\n\tif (typeof func !== 'function')\r\n\t{\r\n\t\tthrow \"ERROR in forEachBook: parameter not a fucntion\"\r\n\t}\r\n\t\r\n\tfor (const hLang in json) //for each human language\r\n\t{\r\n\t\tif (Array.isArray(json[hLang].sections)) //check if sections is an array \r\n\t\t{\r\n\t\t\tjson[hLang].sections.forEach( \r\n\t\t\t(cLang) => //for each computer lanuage\r\n\t\t\t\t{if (Array.isArray(cLang.entries)) //verify is entries is an array\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcLang.entries.forEach( \r\n\t\t\t\t\t\t(book) =>  //for each book\r\n\t\t\t\t\t\t\t{if (typeof book === \"object\") //verify that book is an object\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tfunc(json[hLang],cLang,book) //run the function\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n\r\nfunction searchByLanguage(lang, json)\r\n{\r\n\tlet answer =[] //list of books to return\r\n\tfor (const obj in json)\r\n\t{\r\n\t\t\t/*obj.sections.forEach((section) => section.forEach((entry) => entry.forEach((book) => answer.push(makeBook(book.author,lang,section.section,book.title,book.url)))))*/\r\n\t\t\t\r\n\t\tforEachBook((hLang,cLang,book) => {\r\n\t\t\tif (hLang.language !== undefined && hLang.language.name !== undefined && hLang.language.name.toLowerCase() === lang.toLowerCase())\r\n\t\t\t{\r\n\t\t\tanswer.push(makeBook(book.author,hLang.language.name,cLang.section,book.title,book.url))\r\n\t\t\t}\r\n\t\t\t\t},json)\r\n}\r\n\tconsole.log(answer)\r\n}\r\n\r\nclass SubmitButton extends Component{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t}\r\n\tasync click()\r\n\t{\r\n\t\tlet result = await fetch('https://raw.githubusercontent.com/FreeEbookFoundationBot/free-programming-books-json/main/fpb.json')\r\n\t\tif (result.ok)\r\n\t\t{\r\n\t\t\tlet json = await result.json();\r\n\t\t\tconsole.log(json.children[0])\r\n\t\t\tsearchByLanguage(\"Arabic\",json.children[0].children)\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconsole.log(\"ERROR in fetching json: \" + result.status.toString() + \" \" + result.statusText)\r\n\t\t}\r\n\r\n\t}\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<button onClick = {this.click}>Submit</button>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// Sorts search results by their score\r\nfunction sortByScore(results){\r\n\tresults.sort(function(a,b){\r\n\t\treturn a.score - b.score;\r\n\t});\r\n\treturn results;\r\n}\r\n\r\nfunction App() {\r\n\tconst [ data, setData ] = useState(undefined);\r\n\tconst [ loading, setLoading ] = useState(true); //Determines whether to show spinner\r\n\tconst [ searchTerm, setSearchTerm ] = useState('');\r\n\tconst [ searchResults, setSearchResults ] = useState([]);\r\n\tlet resultsList = null; // the html string containing the search results\r\n\r\n\tconst setSearch = (term) => { // Lets a child set the value of the search term\r\n\t\tsetSearchTerm(term);\r\n\t};\r\n\r\n\t// fetches data the first time the page renders\r\n\tuseEffect( \r\n\t\t() => {\r\n\t\t\tasync function fetchData() {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tlet result = await axios.get('https://raw.githubusercontent.com/FreeEbookFoundationBot/free-programming-books-json/main/fpb.json');\r\n\t\t\t\tsetData(result.data);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tfetchData();\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\t\r\n\t// fires when searchTerm changes\r\n\t// THIS IS THE MAIN SEARCH FUNCTION CURRENTLY\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif(data){\r\n\t\t\t\tlet result = [];\r\n\t\t\t\tdata.children[0].children.forEach( (document) => {\r\n\t\t\t\t\tdocument.sections.forEach( (section) => {\r\n\t\t\t\t\t\tconst fuseOptions = {\r\n\t\t\t\t\t\t\tfindAllMatches: true, \r\n\t\t\t\t\t\t\tshouldSort: false, \r\n\t\t\t\t\t\t\tincludeScore: true, \r\n\t\t\t\t\t\t\tthreshold: 0.3, \r\n\t\t\t\t\t\t\tkeys: ['title']\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlet fuse = new Fuse(section.entries, fuseOptions);\r\n\t\t\t\t\t\tlet fuseResult = fuse.search(searchTerm);\r\n\t\t\t\t\t\tresult = result.concat(fuseResult);\r\n\t\t\t\t\t\tsection.subsections.forEach( (subsection) => {\r\n\t\t\t\t\t\t\tlet fuse = new Fuse(subsection.entries, fuseOptions);\r\n\t\t\t\t\t\t\tlet fuseResult = fuse.search(searchTerm);\r\n\t\t\t\t\t\t\tresult = result.concat(fuseResult);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tresult = sortByScore(result);\r\n\t\t\t\tsetSearchResults(result);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ searchTerm ]\r\n\t)\r\n\r\n\tconst buildList = () => {\r\n\r\n\t};\r\n\t\r\n\tif(loading){ // if still fetching resource\r\n\t\treturn(\r\n\t\t\t<h1>Loading...</h1>\r\n\t\t);\r\n\t}\r\n\tif(searchTerm && searchResults.length !== 0){\r\n\t\tresultsList =\r\n\t\t\tsearchResults &&\r\n\t\t\tsearchResults.map((entry) => {\r\n\t\t\t\treturn (<li><a href={entry.item.url}>{entry.item.title}</a></li>)\r\n\t\t\t});\r\n\t}\r\n\tconsole.log(data);\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<div id=\"frontPage\">\r\n\t\t\t\t<h1>Free Programming Books</h1>\r\n\t\t\t\t{/* <input type=\"text\"></input> */}\r\n\t\t\t\t<SearchBar setSearch={setSearch}/>\r\n\t\t\t\t<LangDropdown data={data}/>\r\n\t\t\t\t<SubmitButton/>\r\n\t\t\t\t<ol>\r\n\t\t\t\t\t{resultsList}\r\n\t\t\t\t</ol>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n \r\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './App.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}